<!DOCTYPE html>
<html lang="en">
{% block content %}
{% include 'sub/head_extended.html' %}

<body class="sb-nav-fixed">
    {% include 'sub/navbar.html' %}
    <div id="layoutSidenav">
        {% include 'sub/sidenav.html' %}
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <h1 class="mt-4">Edit Transaction</h1>
                    <ol class="breadcrumb mb-4">
                        <li class="breadcrumb-item"><a href="{{ url_for('main.list_transactions') }}">Transactions</a></li>
                        <li class="breadcrumb-item active">Edit Transaction</li>
                    </ol>

                    <!-- Transaction edit form -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="fas fa-edit"></i>
                            Edit Transaction Details
                        </div>
                        <div class="card-body">
                            <form method="POST" action="{{ url_for('main.edit_transaction', id=transaction.transactionid) }}">
                                <div class="form-group">
                                    <label for="date">Transaction Date</label>
                                    <input type="date" class="form-control" id="date" name="date" value="{{ transaction.date }}" required>
                                </div>
                                <br>
                                <div class="form-group">
                                    <label for="amount">Amount</label>
                                    <input type="number" class="form-control" id="amount" name="amount" value="{{ transaction.amount }}" step="0.01" required>
                                </div>
                                <br>
                                <div class="form-group">
                                    <label for="description">Description</label>
                                    <input type="text" class="form-control" id="description" name="description" value="{{ transaction.description }}">
                                </div>
                                <br>
                                <div class="form-group">
                                    <label for="account_id">Account</label>
                                    <select class="form-control" id="account_id" name="account_id" required>
                                        {% for account in accounts %}
                                            <option value="{{ account.accountid }}" {% if account.accountid == transaction.accountid %}selected{% endif %}>
                                                {{ account.bank }} - {{ account.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <br>
                                <div class="form-group">
                                    <label for="category_id">Category</label>
                                    <select class="form-control" id="category_id" name="category_id" required>
                                        {% for category in categories %}
                                            <option value="{{ category.categoryid }}" {% if category.categoryid == transaction.categoryid %}selected{% endif %}>
                                                {{ category.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <br>
                                <div class="form-group">
                                    <label for="paymentforperiod">Payment for Period</label>
                                    <input type="date" class="form-control" id="paymentforperiod" name="paymentforperiod" value="{{ transaction.paymentforperiod }}">
                                </div>
                                <br>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="isprepayment" name="isprepayment" {% if transaction.isprepayment %}checked{% endif %}>
                                    <label class="form-check-label" for="isprepayment">Is Prepayment?</label>
                                </div>
                                <br>
                                <button type="submit" class="btn btn-primary">Update Transaction</button>
                                <a href="{{ url_for('main.list_transactions') }}" class="btn btn-secondary">Cancel</a>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</body>


{% endblock %}

</html>